<h1> Listing all users </h1>

<table>

  <tr>
    <% for col_names in User.column_names
      .select { |name| !name.to_s.match("password_digest") }
    %>
      <th><%= col_names.humanize %></th>
    <% end %>
  </tr>

  <% @user.each do |user| %>
    <tr>
      <% for attribute in user.attributes.keys
        .select { |name| !name.to_s.match("password_digest") }
      %>
        <td><%= user.attributes[attribute].to_s%></td>
      <% end %>
      <td><%= link_to 'Show', user_path(user) %></td>
      <% if current_user.admin? %>
        <td><%= link_to 'Edit', edit_user_path(user) %></td>
        <td><%= link_to 'Destroy', user_path(user),
                method: :delete,
  	      data: { confirm: 'Are you sure?' }%></td>
      <% end %>
    </tr>
  <% end %>
</table>
